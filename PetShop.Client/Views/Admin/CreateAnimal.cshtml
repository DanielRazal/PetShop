@model PetShop.Client.Models.AnimalViewModel

@{
    ViewBag.Title = "CreateAnimal";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<article>

<section>

    <form asp-action="CreateAnimal" enctype="multipart/form-data" method="post">
    <div asp-validation-summary="ModelOnly"></div>
    <dl class="row" >
        <dt class = "col-sm-2"><label asp-for="@Model.Animal!.Name"></label></dt>
        <dd class = "col-sm-10"><input asp-for="@Model.Animal!.Name"/>
        <span asp-validation-for="@Model.Animal!.Name" id="Validation"></span></dd>
        <dt class = "col-sm-2"><label asp-for="@Model.Animal!.BirthDate"></label></dt>
        <dd class = "col-sm-10"><input asp-for="@Model.Animal!.BirthDate"/>
        <span asp-validation-for="@Model.Animal!.BirthDate" id="Validation"></span></dd>
        <dt class = "col-sm-2"><label asp-for="@Model.Animal!.Description"></label></dt>
        <dd class = "col-sm-10"><input asp-for="@Model.Animal!.Description"/>
        <span asp-validation-for="@Model.Animal!.Description"></span>
        </dd><dt class = "col-sm-2"><label asp-for="@Model.Animal!.CategoryId"></label></dt>
        <dd class = "col-sm-10">
        <select asp-for="@Model.Animal!.CategoryId" asp-items="ViewBag.Category"></select>
        <span asp-validation-for="@Model.Animal!.CategoryId" ></span></dd>
        <dt class = "col-sm-2"><label asp-for="@Model.Photo"></label></dt>
        <dd class = "col-sm-10">
        <input type="file" asp-for="@Model.Photo" accept="image/*" id="ShowImage"/>
        <img id="ImageSize" src="~/images/NoImageAvailable.jpg"/>
        <span asp-validation-for="@Model.Photo" id="ImageValidation"></span></dd>
        <input type="submit" value="Create" id="CreateButton"/>
    </dl>
    </form>

</section>

<section>

        <a asp-action="Index">
        <input type="submit" value="Back to Admin Page" id="BackPageButton"/></a>

</section>

</article>

@section Scripts { @{await Html.RenderPartialAsync("_ValidationScriptsPartial");} }

<script>

ShowImage.onchange = evt => {
  const [file] = ShowImage.files
  if (file) {
    ImageSize.src = URL.createObjectURL(file)
  }
}
</script>